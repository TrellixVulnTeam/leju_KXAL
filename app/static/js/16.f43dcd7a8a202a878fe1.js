webpackJsonp([16],{"8zp9":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mtWM"),i=e.n(a),r={name:"register",components:{toast:e("8DN1").a},data:function(){return{smsState:!1,userFlag:!1,passwordFlag:!1,btnValue:"获取验证码",isSubmit:!0}},methods:{handleSubmitClick:function(t,s,e){/^[a-zA-Z0-9]{8,16}$/.test(e)?this.passwordFlag=!0:this.passwordFlag=!1,this.passwordFlag||this.$refs.toast.toastShow("密码必须是8-16位字母和数字"),this.passwordFlag&&this.userFlag&&s&&i.a.post("/user/register/",{username:t,verification:s,password:e}).then(this.handleRegisterSucc.bind(this)).catch(this.handleRegisterErr.bind(this))},handleRegisterSucc:function(t){var s=t.data.data.state;0===s||"0"===s?this.$refs.toast.toastShow("缺少参数"):1===s||"1"===s?this.$refs.toast.toastShow("验证码错误"):2===s||"2"===s?(this.$refs.toast.toastShow("注册成功"),this.$router.push("/login")):3===s||"3"===s?this.$refs.toast.toastShow("注册失败"):4!==s&&"4"!==s||this.$refs.toast.toastShow("用户已经注册")},handleRegisterErr:function(){this.$refs.toast.toastShow("请求失败")},handleGetCode:function(t){if(this.isSubmit){/^1[3587]\d{9}$/.test(t)?this.userFlag=!0:this.userFlag=!1,this.userFlag||this.$refs.toast.toastShow("请输入正确的手机号"),this.userFlag&&i.a.post("/user/register/send/sms/",{username:t}).then(this.handleGetSmsSucc.bind(this)).catch(this.handleGetSmsErr.bind(this))}},handleGetSmsSucc:function(t){var s=this;this.isSubmit=!1;var e=60;this.timer=setInterval(function(){e--,s.btnValue=e+"秒后获取",0===e&&(clearInterval(s.timer),s.isSubmit=!0,s.btnValue="请获取验证码")},1e3),this.smsState=t.data.data.state},handleGetSmsErr:function(){this.$refs.toast.toastShow("获取验证码失败")}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"body"},[e("div",{staticClass:"header"},[e("img",{staticClass:"logo-img",attrs:{src:"/static/img/logo.png",alt:""}}),t._v(" "),e("div",{staticClass:"operation"},[e("router-link",{staticClass:"register",attrs:{to:"/register",tag:"span"}},[t._v("注册")]),t._v(" "),e("router-link",{staticClass:"login",attrs:{to:"/login",tag:"span"}},[t._v("登录")])],1)]),t._v(" "),e("div",{staticClass:"main"},[e("label",{staticClass:"register-container border-bottom"},[e("input",{ref:"username",staticClass:"register-input",attrs:{type:"text",placeholder:"请输入手机号"}})]),t._v(" "),e("label",{staticClass:"register-container verification-container"},[e("div",{staticClass:"verification inputCode border-bottom"},[e("input",{ref:"verification",staticClass:"register-input",attrs:{type:"text",placeholder:"请输入验证码"}})]),t._v(" "),e("input",{staticClass:"verification getVerification",attrs:{type:"button",value:t.btnValue},on:{click:function(s){t.handleGetCode(t.$refs.username.value)}}})]),t._v(" "),e("label",{staticClass:"register-container border-bottom"},[e("input",{ref:"password",staticClass:"register-input",attrs:{type:"password",placeholder:"请输入密码"}})]),t._v(" "),e("label",{staticClass:"register-container register-submit border"},[e("input",{staticClass:"submit",attrs:{type:"button",value:"注册"},on:{click:function(s){t.handleSubmitClick(t.$refs.username.value,t.$refs.verification.value,t.$refs.password.value)}}})]),t._v(" "),e("router-link",{staticClass:"look",attrs:{to:"/index"}},[t._v("\n      随便看看\n      "),e("span",{staticClass:"iconfont icon"},[t._v("")])])],1),t._v(" "),e("toast",{ref:"toast"})],1)},staticRenderFns:[]},o=e("VU/8")(r,n,!1,function(t){e("EU4W")},"data-v-0fb32b04",null);s.default=o.exports},EU4W:function(t,s){}});
//# sourceMappingURL=16.f43dcd7a8a202a878fe1.js.map